/*coolie@1.0.25*/
"use strict";define("0",["5","d"],function(t,e,n){var u=t("5");n.exports={template:t("d"),data:function(){return{user:{name:null}}},methods:{logout:u.logout},route:{data:function(t){var e=this;u.getUserAsync(function(n){n&&(e.user.name=n.name);t.next()})}}}});
"use strict";define("5",[],function(n,o,t){function e(){var n=localStorage.getItem("token");n&&(r=new Promise(function(n,o){Ajax.get($config.GHOST_SERVER_HOST+"ghost/api/v0.1/users/me/?status=all&include=roles",!1).done(function(o){u=o.users[0];n(u)}).error(o).send()}))}function i(n){if(u)return n(u);r?r.then(function(o){n(o)})["catch"](function(){n(null)}):n(null)}var u=null,r=null;t.exports={init:e,getUserAsync:i,login:function(n){return new Promise(function(o,t){Ajax.post($config.GHOST_SERVER_HOST+"ghost/api/v0.1/authentication/token",n).done(function(n){localStorage.setItem("token",n.access_token);e();o()}).error(t).send()})},logout:function(){localStorage.removeItem("token");u=null;r=null;$router.go("/login")},isLoggedInAsync:function(n){if(u)return n(!!u&&!!u.roles);i(function(o){n(o?!0:!1)})}}});
define("d",[],function(y,d,r){r.exports="<div> <form class=\"pure-form pure-form-stacked\"> <fieldset> <legend>用户信息</legend> <label for=\"name\">Name</label> <input id=\"name\" type=\"text\" v-model=\"user.name\" readonly> <button class=\"pure-button pure-button-primary\" type=\"button\" @click=\"logout\">退出登录</button> </fieldset> </form> </div> "});