/*coolie@1.0.8*/
"use strict";define("0",["6","9"],function(t,e,n){var s=t("6");n.exports={template:t("9"),data:function(){return{user:{grant_type:"password",username:null,password:null,client_id:"ghost-admin"}}},methods:{doLogin:function(){this.user.username&&this.user.password&&s.login(this.user).then(function(){$router.go("/user")})}}}});
"use strict";define("6",[],function(n,t,e){function o(){var n=localStorage.getItem("token");n&&(r=new Promise(function(n,t){Ajax.get("http://192.168.10.101:9300/ghost/api/v0.1/users/me/?status=all&include=roles",!1).done(function(t){i=t.users[0];n(i)}).error(t).send()}))}function u(n){if(i)return n(i);r?r.then(function(t){n(t)})["catch"](function(){n(null)}):n(null)}var i=null,r=null;e.exports={init:o,getUserAsync:u,login:function(n){return new Promise(function(t,e){Ajax.post("http://192.168.10.101:9300/ghost/api/v0.1/authentication/token",n).done(function(n){localStorage.setItem("token",n.access_token);o();t()}).error(e).send()})},logout:function(){localStorage.removeItem("token");i=null;r=null;$router.go("/login")},isLoggedInAsync:function(n){if(i)return n(!!i&&!!i.roles);u(function(t){n(t?!0:!1)})}}});
define("9",[],function(y,d,r){r.exports="<form class=\"pure-form pure-form-stacked\" v-on:submit.prevent=\"doLogin\"> <fieldset> <legend>登录</legend> <label for=\"grant-type\">grant_type</label> <input id=\"grant-type\" v-model=\"user.grant_type\" type=\"text\" readonly> <label for=\"client-id\">client_id</label> <input id=\"client-id\" v-model=\"user.client_id\" type=\"text\" readonly> <label for=\"username\">Username</label> <input id=\"username\" v-model=\"user.username\" type=\"text\" placeholder=\"Username\"> <label for=\"password\">Password</label> <input id=\"password\" v-model=\"user.password\" type=\"password\" placeholder=\"Password\"> <button type=\"submit\" class=\"pure-button pure-button-primary\">登录</button> </fieldset> </form> "});